class StickyAddToCart extends HTMLElement{constructor(){super(),(this.sticky=this).stickyBounds=document.getElementById("product-add-to-cart")||document.querySelector("[data-combo-addtocart]"),this.closeSticky=this.querySelector("[data-close-sticky-add-to-cart]"),this.expandSticky=this.querySelector("[data-expand-sticky-add-to-cart]"),this.closeSticky?.addEventListener("click",this.setCloseSticky.bind(this)),this.expandSticky?.addEventListener("click",this.setExpandSticky.bind(this)),this.openStickyButton=document.getElementById("show-sticky-product"),this.closeModal=this.closeStickyModal.bind(this)}connectedCallback(){this.onScrollHandler=this.onScroll.bind(this),window.addEventListener("scroll",this.onScrollHandler,!1),this.openStickyButton.addEventListener("click",this.openStickyModal.bind(this)),document.addEventListener("click",t=>{(t.target.matches(".background-overlay")||null!=t.target.closest("[data-close-sticky-mobile]")||t.target.matches("[data-close-sticky-mobile]"))&&this.closeModal()});var t=this.closest("[data-sticky-add-to-cart]").clientHeight;this.sticky.querySelector(".sticky-product-mobile").style.bottom=t+"px"}openStickyModal(){document.body.classList.add("show-mobile-options")}closeStickyModal(){document.body.classList.remove("show-mobile-options")}disconnectedCallback(){window.removeEventListener("scroll",this.onScrollHandler)}onScroll(){var t=window.pageYOffset||document.documentElement.scrollTop,e=$(this.stickyBounds).offset().top+$(this.stickyBounds).outerHeight(!0)+100,i=window.innerHeight,a=document.body.clientHeight;if(e<t&&t+i<a){if(requestAnimationFrame(this.show.bind(this)),this.sticky.classList.contains("style-1")){let t=0;e=document.getElementById("preview-bar-iframe"),i=document.querySelector(".halo-sticky-toolbar-mobile");e&&"none"!==window.getComputedStyle(e).display?t=e.offsetHeight:i&&(t=i.offsetHeight),this.sticky.style.top="auto",this.sticky.style.bottom=t+"px"}else if(this.sticky.classList.contains("style-2"))if(document.body.classList.contains("scroll-up")){let t=document.querySelector("sticky-header").offsetHeight;window.innerWidth<551&&(t+=20),this.sticky.style.top=t+"px"}else document.body.classList.contains("scroll-down")&&(550<window.innerWidth?this.sticky.style.top=0:this.sticky.style.top="20px")}else requestAnimationFrame(this.hide.bind(this));this.currentScrollTop=t}hide(){this.sticky.classList.remove("show-sticky","hidden-sticky","full-sticky","animate"),document.body.classList.remove("show-mobile-options")}show(){this.sticky.classList.add("show-sticky","animate")}setCloseSticky(t){t.preventDefault(),this.sticky.classList.contains("full-sticky")?this.sticky.classList.remove("full-sticky"):this.sticky.classList.add("hidden-sticky")}setExpandSticky(t){t.preventDefault(),this.sticky.classList.add("full-sticky")}}customElements.define("sticky-add-to-cart",StickyAddToCart);class VariantStickyAddToCart extends HTMLElement{constructor(){super(),this.item=$(this).closest(".productView"),this.sticky=$(this).closest(".productView-stickyCart"),this.addEventListener("change",this.onVariantChange.bind(this))}onVariantChange(t){this.updateOptions(),this.updateMasterId(),this.updatePickupAvailability(),this.updateMedia(200),this.updateURL(),this.updateVariantInput(),this.renderProductAjaxInfo(),this.renderProductInfo(),this.updateAttribute(!this.currentVariant.available)}updateOptions(){this.options=Array.from(this.querySelectorAll("select"),t=>t.value)}decodeOptions(){this.options=this.options.map(t=>{return this.decodeOption(t)})}decodeOption(t){return t?t.split("Special_Double_Quote").join('"').split("Special_Slash").join("/"):null}encodeOption(t){return t?t.split('"').join("Special_Double_Quote").split("/").join("Special_Slash"):null}updateMasterId(){this.decodeOptions(),this.currentVariant=this.getVariantData().find(t=>t.id==this.options)}updateMedia(t){if(this.currentVariant&&this.currentVariant?.featured_media){var e=this.item.find(".sticky-image"),i=this.currentVariant?.featured_image;if(e){e.find("img").attr({src:i.src,srcset:i.src,alt:i.alt});const a=document.querySelectorAll(`[data-media-id="${this.dataset.section}-${this.currentVariant.featured_media.id}"]`);a&&window.setTimeout(()=>{$(a).trigger("click")},t)}}}updateURL(){this.currentVariant&&window.history.replaceState({},"",this.dataset.url+"?variant="+this.currentVariant.id)}updateVariantInput(){document.querySelectorAll(`#product-form-${this.dataset.product}, #product-form-installment-${this.dataset.product}, #product-form-sticky-`+this.dataset.product).forEach(t=>{t=t.querySelector('input[name="id"]');t.value=this.currentVariant.id,t.dispatchEvent(new Event("change",{bubbles:!0}))})}updatePickupAvailability(){var t=document.querySelector("pickup-availability");t&&(this.currentVariant?.available?t.fetchAvailability(this.currentVariant.id):(t.removeAttribute("available"),t.innerHTML=""))}renderProductAjaxInfo(){fetch(`${this.dataset.url}?variant=${this.currentVariant.id}&section_id=`+this.dataset.section).then(t=>t.text()).then(t=>{var e="product-price-"+this.dataset.product,t=(new DOMParser).parseFromString(t,"text/html"),i=document.getElementById(e),t=t.getElementById(e);t&&i&&(i.innerHTML=t.innerHTML),document.getElementById("product-price-"+this.dataset.product)?.classList.remove("visibility-hidden")})}renderProductInfo(){var u=this.getVariantData().filter(t=>t.available),p=this.currentVariant?.option1,h=this.currentVariant?.option2,m=this.currentVariant?.option3,t=this.item.find(".product-form__input:not(.mobile)"),e=this.item.find(".product-form__input.mobile"),y=!1,i=c=>{$.each(c,(t,e)=>{var i=$(e).data("option-index"),a=$(e).data("product-attribute");switch(i){case 0:$(e).find("[data-header-option]").text(p),"set-select"==a?($(e).find(".select__select").val(p),$(e).find(".select__select option").each((t,e)=>{e.value==p?$(e).attr("selected","selected"):$(e).removeAttr("selected")})):($(e).find(".product-form__radio").prop("checked",!1),$(e).find(`.product-form__radio[value="${this.encodeOption(p)}"]`).prop("checked",!0));var s=u.filter(t=>t.option1===p);h&&(r=(n=$(c[1])).find(".product-form__radio"),d=n.find(".select__select option"),"set-rectangle"==a?r.each((t,e)=>{var i=$(e).next(),a=$(e).val();null==s.find(t=>t.option2==this.decodeOption(a))?(i.removeClass("available").addClass("soldout"),y&&$(inputSticky[t]).next().removeClass("available").addClass("soldout")):(i.removeClass("soldout").addClass("available"),y&&$(inputSticky[t]).next().removeClass("soldout").addClass("available"))}):d.each((t,e)=>{var i=$(e),a=$(e).val();null==s.find(t=>t.option2==this.decodeOption(a))?(i.attr("disabled",!0),y&&$(selectOptionSticky[t]).attr("disabled",!0)):(i.removeAttr("disabled"),y&&$(selectOptionSticky[t]).removeAttr("disabled"))})),m&&(r=(n=$(c[2])).find(".product-form__radio"),d=n.find(".select__select option"),"set-rectangle"==a?r.each((t,e)=>{var i=$(e).next(),a=$(e).val();null==s.find(t=>t.option3==this.decodeOption(a))?(i.removeClass("available").addClass("soldout"),y&&$(inputSticky[t]).next().removeClass("available").addClass("soldout")):(i.removeClass("soldout").addClass("available"),y&&$(inputSticky[t]).next().removeClass("soldout").addClass("available"))}):electOption.each((t,e)=>{var i=$(e),a=$(e).val();null==s.find(t=>t.option3==this.decodeOption(a))?(i.attr("disabled",!0),y&&$(selectOptionSticky[t]).attr("disabled",!0)):(i.removeAttr("disabled"),y&&$(selectOptionSticky[t]).removeAttr("disabled"))}));break;case 1:$(e).find("[data-header-option]").text(h),"set-select"==a?($(e).find(".select__select").val(h),$(e).find(".select__select option").each((t,e)=>{e.value==h?$(e).attr("selected","selected"):$(e).removeAttr("selected")})):($(e).find(".product-form__radio").prop("checked",!1),$(e).find(`.product-form__radio[value="${this.encodeOption(h)}"]`).prop("checked",!0));var o=u.filter(t=>t.option2===h);p&&(r=(n=$(c[0])).find(".product-form__radio"),d=n.find(".select__select option"),"set-rectangle"==a?r.each((t,e)=>{var i=$(e).next(),a=$(e).val();null==o.find(t=>t.option1==this.decodeOption(a))?(i.removeClass("available").addClass("soldout"),y&&$(inputSticky[t]).next().removeClass("available").addClass("soldout")):(i.removeClass("soldout").addClass("available"),y&&$(inputSticky[t]).next().removeClass("soldout").addClass("available"))}):d.each((t,e)=>{var i=$(e),a=$(e).val();null==o.find(t=>t.option1==this.decodeOption(a))?(i.attr("disabled",!0),y&&$(inputSticky[t]).attr("disabled",!0)):(i.removeAttr("disabled"),y&&$(inputSticky[t]).removeAttr("disabled"))})),m&&(r=(n=$(c[2])).find(".product-form__radio"),d=n.find(".select__select option"),"set-rectangle"==a?r.each((t,e)=>{var i=$(e).next(),a=$(e).val();null==o.find(t=>t.option3==this.decodeOption(a))?(i.removeClass("available").addClass("soldout"),y&&$(inputSticky[t]).next().removeClass("available").addClass("soldout")):(i.removeClass("soldout").addClass("available"),y&&$(inputSticky[t]).next().removeClass("soldout").addClass("available"))}):electOption.each((t,e)=>{var i=$(e),a=$(e).val();null==o.find(t=>t.option3==this.decodeOption(a))?(i.attr("disabled",!0),y&&$(inputSticky[t]).attr("disabled",!0)):(i.removeAttr("disabled"),y&&$(inputSticky[t]).removeAttr("disabled"))}));break;case 2:$(e).find("[data-header-option]").text(m),"set-select"==a?($(e).find(".select__select").val(m),$(e).find(".select__select option").each((t,e)=>{e.value==m?$(e).attr("selected","selected"):$(e).removeAttr("selected")})):($(e).find(".product-form__radio").prop("checked",!1),$(e).find(`.product-form__radio[value="${this.encodeOption(m)}"]`).prop("checked",!0));var d,n,r,l=u.filter(t=>t.option3===m);p&&(r=(n=$(c[0])).find(".product-form__radio"),d=n.find(".select__select option"),"set-rectangle"==a?r.each((t,e)=>{var i=$(e).next(),a=$(e).val();null==l.find(t=>t.option1==this.decodeOption(a))?(i.removeClass("available").addClass("soldout"),y&&$(inputSticky[t]).next().removeClass("available").addClass("soldout")):(i.removeClass("soldout").addClass("available"),y&&$(inputSticky[t]).next().removeClass("soldout").addClass("available"))}):d.each((t,e)=>{var i=$(e),a=$(e).val();null==l.find(t=>t.option1==this.decodeOption(a))?(i.attr("disabled",!0),y&&$(inputSticky[t]).attr("disabled",!0)):(i.removeAttr("disabled"),y&&$(inputSticky[t]).removeAttr("disabled"))})),h&&(r=(n=$(c[1])).find(".product-form__radio"),"set-rectangle"==a?r.each((t,e)=>{var i=$(e).next(),a=$(e).val();null==l.find(t=>t.option2==this.decodeOption(a))?(i.removeClass("available").addClass("soldout"),y&&$(inputSticky[t]).next().removeClass("available").addClass("soldout")):(i.removeClass("soldout").addClass("available"),y&&$(inputSticky[t]).next().removeClass("soldout").addClass("available"))}):d.each((t,e)=>{var i=$(e),a=$(e).val();null==l.find(t=>t.option2==this.decodeOption(a))?(i.attr("disabled",!0),y&&$(inputSticky[t]).attr("disabled",!0)):(i.removeAttr("disabled"),y&&$(inputSticky[t]).removeAttr("disabled"))}))}})};i(t),i(e),0<this.item.find("[data-sku]").length&&this.item.find("[data-sku] .productView-info-value").text(this.currentVariant.sku),null!=this.currentVariant?.inventory_management&&(t="product_inven_array_"+this.dataset.product,null!=(i=window[t]))&&(e=i[this.currentVariant.id],t=parseInt(e),this.item.find('input[name="quantity"]').attr("data-inventory-quantity",t),0<this.item.find("[data-inventory]").length&&(0<t?this.item.find("[data-inventory] .productView-info-value").text(window.inventory_text.inStock):this.item.find("[data-inventory] .productView-info-value").text(window.inventory_text.outOfStock)),0<this.item.find(".productView-hotStock").length)&&(e=(i=this.item.find(".productView-hotStock")).data("hot-stock"),0<t&&t<=e?(e=window.inventory_text.hotStock.replace("[inventory]",t),i.text(e).show()):i.hide())}updateAttribute(t=!0){var e,i,a=document.getElementById("product-form-"+this.dataset.product)?.querySelector('[name="add"]'),s=document.getElementById("product-form-sticky-"+this.dataset.product)?.querySelector('[name="add"]'),o=$("[data-sticky-add-to-cart] .quantity__input"),d=this.item.find(".productView-notifyMe"),n=$("[data-sticky-add-to-cart] .sticky-price .money"),r=parseInt(o.attr("data-inventory-quantity"));0===n.length&&(n=$("[data-sticky-add-to-cart] .sticky-price .money-subtotal")),t?(e=window.variantStrings.soldOut,this.item.removeClass("isChecked"),o.attr("data-price",this.currentVariant?.price),o.attr("disabled",!0),a.setAttribute("disabled",!0),a.textContent=e,s.setAttribute("disabled",!0),s.textContent=e,0<d.length&&(d.find('input[name="halo-notify-product-variant"]').val(this.currentVariant.title),d.find(".notifyMe-text").empty(),d.slideDown("slow"))):(t=0,i=this.currentVariant?.price,window.subtotal.show?(t=o.val()*i,t=Shopify.formatMoney(t,window.money_format),window.currencyFormatted&&(t=$(t).text()),"1"==window.subtotal.style?((document.querySelector(".productView-subtotal .money")||document.querySelector(".productView-subtotal .money-subtotal")).textContent=t,e=this.currentVariant.available&&r<=0?window.variantStrings.preOrder:window.variantStrings.addToCart):"2"==window.subtotal.style&&(e=window.subtotal.text.replace("[value]",t))):(t=Shopify.formatMoney(i,window.money_format),window.currencyFormatted&&(t=$(t).text()),e=this.currentVariant.available&&r<=0?window.variantStrings.preOrder:window.variantStrings.addToCart),this.item.addClass("isChecked"),o.attr("data-price",this.currentVariant?.price),o.attr("disabled",!1),a.removeAttribute("disabled"),a.textContent=e,s.removeAttribute("disabled"),s.textContent=e,0!=t&&n.length&&n.text(t),0<d.length&&d.slideUp("slow"))}getVariantData(){return this.variantData=this.variantData||JSON.parse(this.querySelector('[type="application/json"]').textContent),this.variantData}}customElements.define("variant-sticky-selects",VariantStickyAddToCart);class VariantStickyRadios extends VariantStickyAddToCart{constructor(){super()}connectedCallback(){this.updateMediaTimeout=void 0}onVariantChange(t){this.updateOptions(),this.updateMasterId(),this.updatePickupAvailability(),this.updateMedia(10),this.updateURL(),this.updateVariantInput(),this.updateSelectVariant(),this.renderProductAjaxInfo(),this.renderProductInfo(),this.updateAttribute(!this.currentVariant.available)}updateOptions(){var t=Array.from(this.querySelectorAll("fieldset"));this.options=t.map(t=>Array.from(t.querySelectorAll("input")).find(t=>t.checked).value)}decodeOptions(){this.options=this.options.map(t=>{return this.decodeOption(t)})}decodeOption(t){return t?t.split("Special_Double_Quote").join('"').split("Special_Slash").join("/"):null}encodeOption(t){return t?t.split('"').join("Special_Double_Quote").split("/").join("Special_Slash"):null}updateSelectVariant(){this.closest(".productView-stickyCart").querySelector("select").value=this.currentVariant.id}updateMasterId(){this.decodeOptions(),this.currentVariant=this.getVariantData().find(t=>!t.options.map((t,e)=>this.options[e]===t).includes(!1))}updateMedia(t){if(this.currentVariant&&this.currentVariant?.featured_media){var e=this.item.find(".sticky-image"),i=this.currentVariant?.featured_image;if(e){e.find("img").attr({src:i.src,srcset:i.src,alt:i.alt});const a=document.querySelectorAll(`[data-media-id="${this.dataset.section}-${this.currentVariant.featured_media.id}"]`);a&&(clearTimeout(this.updateMediaTimeout),this.updateMediaTimeout=setTimeout(()=>{$(a).trigger("click")},t))}}}openStickyModal(){document.body.classList.add("show-mobile-options")}closeStickyModal(){document.body.classList.remove("show-mobile-options")}}function parseDoubleQuote(t,e=!0){return t&&(e?t.replace('"',"spc_dbl_qte"):t.replace("spc_dbl_qte",'"'))}customElements.define("variant-sticky-radios",VariantStickyRadios);