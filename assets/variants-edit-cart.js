class VariantEditCartSelects extends HTMLElement{constructor(){var t;super(),(this.variantSelect=this).item=$(this.variantSelect).closest(".product-edit-item"),this.variantSelect.classList.contains("has-default")&&(this.updateOptions(),this.updateMasterId(),this.renderProductInfo()),this.currentVariant?this.item[0]&&(this.item[0].dataset.inStock=this.currentVariant.available?"true":"false"):this.item[0].dataset.inStock="false",null!=this.currentVariant?.inventory_management&&(t=this.item.data("cart-edit-id"),null!=(t=window["edit_cart_inven_array_"+t]))&&(t=t[this.currentVariant.id],t=parseInt(t),this.item.find('input[name="quantity"]').attr("data-inventory-quantity",t)),this.addEventListener("change",this.onVariantChange.bind(this))}onVariantChange(t){this.updateOptions(),this.updateMasterId(),this.currentVariant?(this.updateMedia(),this.updateVariantInput(),this.updatePrice(),this.renderProductInfo(),this.updateAttribute(!1,!this.currentVariant.available)):this.updateAttribute(!0),this.updateAddToCartButton(),window.show_multiple_currencies&&Currency.currentCurrency!=shopCurrency&&Currency.convertAll(window.shop_currency,$("#currencies .active").attr("data-currency"),"span.money","money_format")}updateOptions(){this.options=Array.from(this.querySelectorAll("select"),t=>t.value)}updateMasterId(){this.currentVariant=this.getVariantData().find(t=>!t.options.map((t,e)=>this.options[e]===t).includes(!1))}updateMedia(){var t,e;this.currentVariant&&this.currentVariant?.featured_image&&(t=this.item.find(".product-edit-image"),e=this.currentVariant?.featured_image,t)&&t.find("img").attr({src:e.src,srcset:e.src,alt:e.alt})}updateVariantInput(){var t=document.querySelector("#product-form-edit-"+this.dataset.product);t&&(t=t.querySelector('input[name="id"]'))&&(t.value=this.currentVariant.id,t.dispatchEvent(new Event("change",{bubbles:!0})))}updatePrice(){var t,e,a=this.item.find(".product-edit-price");a&&(t=this.currentVariant?.price,e=this.currentVariant?.compare_at_price,a.find(".price").html(Shopify.formatMoney(t,window.money_format)).show(),t<e?(a.find(".compare-price").html(Shopify.formatMoney(e,window.money_format)).show(),a.find(".price").addClass("new-price")):(a.find(".compare-price").hide(),a.find(".price").removeClass("new-price")))}renderProductInfo(){var t,e,u=this.getVariantData().filter(t=>t.available),h=this.currentVariant?.option1,p=this.currentVariant?.option2,v=this.currentVariant?.option3,a=this.currentVariant.title,m=this.getElementsByClassName("product-form__input");this.item.find("[data-change-title]").text(a),$.each(m,(t,e)=>{var a=$(e).data("option-index"),i=$(e).data("product-attribute");switch(a){case 0:$(e).find("[data-header-option]").text(h),"set-select"==i&&(r=$(e).find(".select__select").val(),$(e).find(".select__select option").each((t,e)=>{e.value==r?$(e).attr("selected","selected"):$(e).removeAttr("selected")}));var n=u.filter(t=>t.option1===h);p&&(o=(l=$(m[1])).find(".product-form__radio"),d=l.find(".select__select option"),"set-rectangle"==i?o.each((t,e)=>{var a=$(e).next(),i=$(e).val();null==n.find(t=>t.option2==i)?a.removeClass("available").addClass("soldout"):a.removeClass("soldout").addClass("available")}):d.each((t,e)=>{var a=$(e),i=$(e).val();null==n.find(t=>t.option2==i)?a.attr("disabled",!0):a.removeAttr("disabled")})),v&&(o=(l=$(m[2])).find(".product-form__radio"),d=l.find(".select__select option"),"set-rectangle"==i?o.each((t,e)=>{var a=$(e).next(),i=$(e).val();null==n.find(t=>t.option3==i)?a.removeClass("available").addClass("soldout"):a.removeClass("soldout").addClass("available")}):electOption.each((t,e)=>{var a=$(e),i=$(e).val();null==n.find(t=>t.option3==i)?a.attr("disabled",!0):a.removeAttr("disabled")}));break;case 1:$(e).find("[data-header-option]").text(p),"set-select"==i&&(r=$(e).find(".select__select").val(),$(e).find(".select__select option").each((t,e)=>{e.value==r?$(e).attr("selected","selected"):$(e).removeAttr("selected")}));var s=u.filter(t=>t.option2===p);h&&(o=(l=$(m[0])).find(".product-form__radio"),d=l.find(".select__select option"),"set-rectangle"==i?o.each((t,e)=>{var a=$(e).next(),i=$(e).val();null==s.find(t=>t.option1==i)?a.removeClass("available").addClass("soldout"):a.removeClass("soldout").addClass("available")}):d.each((t,e)=>{var a=$(e),i=$(e).val();null==s.find(t=>t.option1==i)?a.attr("disabled",!0):a.removeAttr("disabled")})),v&&(o=(l=$(m[2])).find(".product-form__radio"),d=l.find(".select__select option"),"set-rectangle"==i?o.each((t,e)=>{var a=$(e).next(),i=$(e).val();null==s.find(t=>t.option3==i)?a.removeClass("available").addClass("soldout"):a.removeClass("soldout").addClass("available")}):electOption.each((t,e)=>{var a=$(e),i=$(e).val();null==s.find(t=>t.option3==i)?a.attr("disabled",!0):a.removeAttr("disabled")}));break;case 2:$(e).find("[data-header-option]").text(v),"set-select"==i&&(r=$(e).find(".select__select").val(),$(e).find(".select__select option").each((t,e)=>{e.value==r?$(e).attr("selected","selected"):$(e).removeAttr("selected")}));var r,d,l,o,c=u.filter(t=>t.option3===v);h&&(o=(l=$(m[0])).find(".product-form__radio"),d=l.find(".select__select option"),"set-rectangle"==i?o.each((t,e)=>{var a=$(e).next(),i=$(e).val();null==c.find(t=>t.option1==i)?a.removeClass("available").addClass("soldout"):a.removeClass("soldout").addClass("available")}):d.each((t,e)=>{var a=$(e),i=$(e).val();null==c.find(t=>t.option1==i)?a.attr("disabled",!0):a.removeAttr("disabled")})),p&&(o=(l=$(m[1])).find(".product-form__radio"),"set-rectangle"==i?o.each((t,e)=>{var a=$(e).next(),i=$(e).val();null==c.find(t=>t.option2==i)?a.removeClass("available").addClass("soldout"):a.removeClass("soldout").addClass("available")}):d.each((t,e)=>{var a=$(e),i=$(e).val();null==c.find(t=>t.option2==i)?a.attr("disabled",!0):a.removeAttr("disabled")}))}}),null!=this.currentVariant?.inventory_management&&(a=this.item.data("cart-edit-id"),null!=(a=window["edit_cart_inven_array_"+a]))&&(a=a[this.currentVariant.id],a=parseInt(a),this.item.find('input[name="quantity"]').attr("data-inventory-quantity",a),0<this.item.find(".product-edit-hotStock").length)&&(e=(t=this.item.find(".product-edit-hotStock")).data("edit-cart-hot-stock"),0<a&&a<=e?(e=window.inventory_text.hotStock.replace("[inventory]",a),t.text(e).show()):t.hide())}updateAttribute(t=!0,e=!0){var a=this.item.find(".alertBox"),i=this.item.find('input[name="quantity"]'),n=this.item.find(".product-edit-notifyMe"),s=this.item.find(".productView-hotStock");t?(this.item.removeClass("isChecked"),i.attr("disabled",!0),a.find(".alertBox-message").text(window.variantStrings.unavailable_message),a.show(),n.slideUp("slow"),0<s.length&&s.hide()):e?(this.item.removeClass("isChecked"),i.attr("disabled",!0),a.find(".alertBox-message").text(window.variantStrings.soldOut_message),a.show(),this.item.find(".quantity__message").empty().hide(),0<n.length&&(n.find('input[name="halo-notify-product-variant"]').val(this.currentVariant.title),n.find(".notifyMe-text").empty(),n.slideDown("slow"))):(this.item.addClass("isChecked"),i.attr("disabled",!1),a.find(".alertBox-message").text(""),a.hide(),0<n.length&&n.slideUp("slow")),this.item[0]&&(this.item[0].dataset.inStock=this.currentVariant.available?"true":"false")}getVariantData(){return this.variantData=this.variantData||JSON.parse(this.querySelector('[type="application/json"]').textContent),this.variantData}updateAddToCartButton(){var t,e=this.variantSelect.closest("[data-template-cart-edit]");e&&(e=[...e.querySelectorAll(".product-edit-item")],t=this.variantSelect.closest("[data-edit-cart-popup]").querySelector("[data-update-cart-edit]"),e=e.every(t=>"true"==t.dataset.inStock),t.disabled=!e)}}customElements.define("variant-edit-selects",VariantEditCartSelects);class VariantEditCartRadios extends VariantEditCartSelects{constructor(){super()}updateOptions(){var t=Array.from(this.querySelectorAll("fieldset"));this.options=t.map(t=>Array.from(t.querySelectorAll("input")).find(t=>t.checked).value)}}customElements.define("variant-edit-radios",VariantEditCartRadios);class QuantityEditCartInput extends HTMLElement{constructor(){super(),this.input=this.querySelector("input"),this.changeEvent=new Event("change",{bubbles:!0}),this.item=$(this.input).closest(".product-edit-item"),this.input.addEventListener("change",this.onInputChange.bind(this)),this.querySelectorAll(".btn-quantity").forEach(t=>t.addEventListener("click",this.onButtonClick.bind(this)))}onButtonClick(t){t.preventDefault();var e=this.input.value,a=parseInt(this.input.dataset.inventoryQuantity),i=Number(this.input.value);t=t.target.classList.contains("plus")?i+1:i-1,e<1&&(this.input.value=t=1),a<e&&(i="quick_view_selling_array_"+this.input.dataset.product,e=window[i][currentId],console.log(e),"deny"==e)&&(this.input.value=t=a,i=getInputMessage(a),showWarning(i,3e3)),this.input.value=t,this.input.dispatchEvent(this.changeEvent)}onInputChange(t){t.preventDefault();var e,t=Number(this.input.value),a=Number(this.input.dataset.quantity);t<1?this.input.value=t=1:a<t?(e=window.inventory_text.warningQuantity.replace("[inventory]",a),this.input.value=t=a,this.item.find(".quantity__message").text(e).show(),this.item.removeClass("isChecked")):(this.item.addClass("isChecked"),this.item.find(".quantity__message").empty().hide())}}customElements.define("quantity-edit-cart-input",QuantityEditCartInput);