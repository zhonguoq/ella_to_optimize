class FreeShippingMeter extends HTMLElement{constructor(){super()}static freeShippingText=window.free_shipping_text.free_shipping_message;static freeShippingText1=window.free_shipping_text.free_shipping_message_1;static freeShippingText2=window.free_shipping_text.free_shipping_message_2;static freeShippingText3=window.free_shipping_text.free_shipping_message_3;static freeShippingText4=window.free_shipping_text.free_shipping_message_4;static classLabel1="progress-30";static classLabel2="progress-60";static classLabel3="progress-100";static freeshipPrice=parseInt(window.free_shipping_price);connectedCallback(){this.freeShippingEligible=0,this.progressBar=this.querySelector("[data-shipping-progress]"),this.messageElement=this.querySelector("[data-shipping-message]"),this.textEnabled="true"===this.progressBar?.dataset.textEnabled,this.shipVal=window.free_shipping_text.free_shipping_1,this.progressMeter=this.querySelector("[ data-free-shipping-progress-meter]"),this.addEventListener("change",this.onCartChange.bind(this)),this.initialize()}initialize(){Shopify.getCart(e=>{this.cart=e,this.calculateProgress(e)})}onCartChange(e){this.initialize()}calculateProgress(e){e=parseInt(e.total_price)/100;let s=Math.round(100*e/FreeShippingMeter.freeshipPrice);100<=s&&(s=100);var e=this.getText(e,s),r=this.getClassLabel(s);this.setProgressWidthAndText(s,e,r)}getText(e,s){let r;return 0==e?(this.progressBar.classList.add("progress-hidden"),r="<span>"+FreeShippingMeter.freeShippingText+" "+Shopify.formatMoney(100*FreeShippingMeter.freeshipPrice,window.money_format)+"!</span>"):e>=FreeShippingMeter.freeshipPrice?(this.progressBar.classList.remove("progress-hidden"),this.freeShippingEligible=1,r=FreeShippingMeter.freeShippingText1):(this.progressBar.classList.remove("progress-hidden"),e=parseInt(FreeShippingMeter.freeshipPrice-e),r="<span>"+FreeShippingMeter.freeShippingText2+" </span>"+Shopify.formatMoney(100*e,window.money_format)+"<span> "+FreeShippingMeter.freeShippingText3+' </span><span class="text">'+FreeShippingMeter.freeShippingText4+"</span>",this.shipVal=window.free_shipping_text.free_shipping_2),r}getClassLabel(e){let s;return s=0===e?"none":e<=30?FreeShippingMeter.classLabel1:e<=60?FreeShippingMeter.classLabel2:e<=100?FreeShippingMeter.classLabel3:"progress-free"}resetProgressClass(e){this.progressBar.classList.remove("progress-30"),this.progressBar.classList.remove("progress-60"),this.progressBar.classList.remove("progress-100"),this.progressBar.classList.remove("progress-free"),this.progressBar.classList.add(e)}setProgressWidthAndText(e,s,r){setTimeout(()=>{this.resetProgressClass(r),this.progressMeter.style.width=e+"%",this.textEnabled&&(this.progressMeter.querySelector(".text").innerHTML=e+"%"),this.messageElement.innerHTML=s,(window.show_multiple_currencies&&Currency.currentCurrency!=shopCurrency||window.show_auto_currency)&&Currency.convertAll(window.shop_currency,$("#currencies .active").attr("data-currency"),"span.money","money_format")},400)}}window.addEventListener("load",()=>{customElements.define("free-shipping-component",FreeShippingMeter)});