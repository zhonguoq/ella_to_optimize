if(void 0===lookbookDialogRef){class a extends HTMLElement{constructor(){super()}connectedCallback(){this.RESERVED_SPACE=20,this.left=0,this.top=0,this.inLeftHalf=!0,this.dialog=this.querySelector("[data-lookbook-dialog]"),this.productItem=this.querySelector(".product-item"),this.closeDialogButton=this.querySelector("[data-close-lookbook-dialog-button]"),this.productItem.appendChild(this.closeDialogButton),1024<window.innerWidth?this.addEventListener("click",this.toggleDialog.bind(this)):this.closeDialogButton.style.display="none",window.addEventListener("resize",this.onResize.bind(this))}onResize(){1024<window.innerWidth?(this.removeEventListener("click",this.toggleDialog.bind(this)),this.addEventListener("click",this.toggleDialog.bind(this)),this.closeDialogButton.style.display="block"):(this.removeEventListener("click",this.toggleDialog.bind(this)),this.closeDialogButton.style.display="none"),this.dialog.hasAttribute("open")&&this.closeDialog()}resetPosition(){this.left=0,this.top=0,this.setPosition()}toggleDialog(t){if(!(window.innerWidth<=1024))return t.target.matches("[data-close-lookbook-dialog-button]")||this.checkIsQuickshop3(t)||this.checkIsQuickView(t)?this.closeDialog():t.target.closest(".product-item")||t.target.matches(".product-item")?void 0:this.dialog.hasAttribute("open")?this.closeDialog():void(t.target.matches(".glyphicon")&&(t.stopImmediatePropagation(),this.openDialog()))}checkIsQuickshop3(t){return!!document.body.classList.contains("quick_shop_option_3")&&(t.target.matches("[data-quickshop-popup]")||t.target.closest("[data-quickshop-popup]"))}checkIsQuickView(t){return t.target.matches("[data-open-quick-view-popup]")||t.target.closest("[data-open-quick-view-popup]")||t.target.matches(".card-quickview")}openDialog(){this.currentTop=window.scrollY,this.resetPosition(),this.dialog.showModal(),this.calculatePosition({currentWindowTop:this.currentTop}),this.setPosition(),window.scrollTo({top:this.currentTop}),this.productItem.scrollIntoView({block:"nearest",behavior:"smooth"})}closeDialog(){this.productItem.classList.add("closing"),setTimeout(()=>{this.resetPosition(),this.dialog.close(),this.productItem.classList.remove("closing")},500)}calculatePosition({currentWindowTop:t}){var o,e,i,s,l,n,c=this.getBoundingClientRect(),d=this.productItem.getBoundingClientRect();1024<window.innerWidth?({left:c,right:o,top:e,width:i}=c,{left:d,top:s,width:l,height:n}=d,window.innerWidth/2<c+i/2&&(this.inLeftHalf=!1),this.left=a.getLeft({inLeftHalf:this.inLeftHalf,reservedSpace:this.RESERVED_SPACE,right:o,left:c,dialogLeft:d,dialogWidth:l}),this.top=a.getTop({top:e,dialogHeight:n,dialogTop:s,currentWindowTop:t,reservedSpace:this.RESERVED_SPACE})):(this.top=50,this.left=50)}setPosition(){this.productItem.style.setProperty("--top",this.top),this.productItem.style.setProperty("--left",this.left)}static getLeft(t){var{inLeftHalf:t,reservedSpace:o,right:e,left:i,dialogLeft:s,dialogWidth:l}=t;let n,a;return a=t?-1*(s-(n=e+o)):(n=i-o-l)-s}static getTop(t){var{top:t,dialogHeight:o,reservedSpace:e,dialogTop:i,currentWindowTop:s}=t;let l,n;return n=t+o+e>s+window.innerHeight?-1*(i-(l=t-o+e)):(l=t-e)-i}}class b extends HTMLElement{constructor(){super()}connectedCallback(){this.lookbookIcons=[...this.querySelectorAll("[data-lookbook-icon]")],this.initialized=!1,window.innerWidth<=1024&&this.lookbookIcons.forEach(t=>{t.addEventListener("click",this.onClick.bind(this))}),window.addEventListener("resize",this.onResize.bind(this)),setTimeout(()=>{this.initialized=!0},150)}onResize(){window.innerWidth<=1024?this.lookbookIcons.forEach(t=>{t.removeEventListener("click",this.onClick.bind(this)),t.addEventListener("click",this.onClick.bind(this))}):this.lookbookIcons.forEach(t=>{t.removeEventListener("click",this.onClick.bind(this))})}onClick(t){1024<window.innerWidth||!this.initialized||this.buildPopup(t)}buildPopup(t){t=t.currentTarget,t=this.lookbookIcons.indexOf(t);this.lookbookIcons.forEach(t=>{var o,e=t.querySelector(".product-item"),t=t.querySelector("[data-lookbook-dialog]");e&&(o=`sig-${e.dataset.productId}-`+Date.now().toString(),t.dataset.signature=o,e.dataset.signature=o,c.appendItem(e))}),c.togglePopup(!0,t)}}class c extends HTMLElement{constructor(){super()}connectedCallback(){this.contentWrapper=this.querySelector("[data-lookbook-mobile-images-container]"),this.closeButton=this.querySelector("[data-close-lookbook-modal]"),this.closeButton.addEventListener("click",()=>{c.togglePopup(!1)}),this.addEventListener("click",this.onSelfClick.bind(this)),window.addEventListener("resize",this.onResize.bind(this))}onSelfClick(t){"lookbook-mobile-popup"===t.target.tagName.toLowerCase()&&(c.togglePopup(!1),document.getElementById("halo-card-mobile-popup")?.classList.remove("show"),document.body.classList.remove("quick_shop_popup_mobile"))}onResize(){c.togglePopup(!1)}static appendItem(t){document.querySelector("[data-lookbook-popup-mobile] [data-lookbook-mobile-images-container]").appendChild(t)}static togglePopup(t,o=0){var e=document.querySelector("[data-lookbook-popup-mobile] [data-lookbook-mobile-images-container]");if(c.checkAndSetOverflowing(e),document.body.classList.toggle("mobile-popup-active",t),t)setTimeout(()=>{document.querySelectorAll("[data-lookbook-popup-mobile] .product-item")[o]?.scrollIntoView({behavior:"smooth",block:"start"})},400);else{const i=e.querySelectorAll("[data-signature]");setTimeout(()=>{i.forEach(t=>{var o=t.dataset.signature;document.querySelector(`[data-lookbook-dialog][data-signature="${o}"]`).appendChild(t)})},350)}}static checkAndSetOverflowing(t=null){t&&t.classList.toggle("center",t.scrollWidth<=t.clientWidth)}}var lookbookDialogRef=a;window.addEventListener("load",()=>{customElements.define("lookbook-dialog-dot",a),customElements.define("lookbook-wrapper",b),customElements.define("lookbook-mobile-popup",c)})}