class ProductForm extends HTMLElement{constructor(){super(),this.form=this.querySelector("form"),this.form.addEventListener("submit",this.onSubmitHandler.bind(this)),this.cartNotification=document.querySelector("cart-notification")}onSubmitHandler(t){t.preventDefault(),this.cartNotification.setActiveElement(document.activeElement);const e=this.querySelector('[type="submit"]');e.setAttribute("disabled",!0),e.classList.add("loading");t=JSON.stringify({...JSON.parse(serializeForm(this.form)),sections:this.cartNotification.getSectionsToRender().map(t=>t.id),sections_url:window.location.pathname});fetch(""+routes.cart_add_url,{...fetchConfig("javascript"),body:t}).then(t=>t.json()).then(t=>{this.cartNotification.renderContents(t)}).catch(t=>{console.error(t)}).finally(()=>{e.classList.remove("loading"),e.removeAttribute("disabled")})}}customElements.define("product-form",ProductForm);