class VariantSelects extends HTMLElement{constructor(){super(),this.item=$(this).closest(".productView"),this.isFullWidth=this.item.is(".layout-4"),this.onVariantInit(),this.addEventListener("change",this.onVariantChange.bind(this))}onVariantInit(){this.updateOptions(),this.updateMasterId(),this.updateMedia(1500),this.renderProductAjaxInfo(),this.renderProductInfo(),this.currentVariant?this.updateAttribute(!1,!this.currentVariant.available):this.updateAttribute(!0)}onVariantChange(t){this.updateOptions(),this.updateMasterId(),this.updatePickupAvailability(),this.currentVariant?(this.updateMedia(200),this.updateURL(),this.updateVariantInput(),this.renderProductAjaxInfo(),this.renderProductInfo(),this.updateProductInfo(),this.updateAttribute(!1,!this.currentVariant.available),this.updateStickyAddToCart(!1,!this.currentVariant.available),this.checkQuantityWhenVariantChange()):(this.updateAttribute(!0),this.updateStickyAddToCart(!0))}updateOptions(){this.options=Array.from(this.querySelectorAll("select"),t=>t.value)}decodeOptions(){this.options=this.options.map(t=>{return this.decodeOption(t)})}decodeOption(t){return t?t.split("Special_Double_Quote").join('"').split("Special_Slash").join("/"):null}encodeOption(t){return t?t.split('"').join("Special_Double_Quote").split("/").join("Special_Slash"):null}updateMasterId(){this.decodeOptions(),this.currentVariant=this.getVariantData().find(t=>!t.options.map((t,e)=>this.options[e]===t).includes(!1))}updateMedia(t){if(this.currentVariant&&this.currentVariant?.featured_media){const i=document.querySelectorAll(`[data-media-id="${this.dataset.section}-${this.currentVariant.featured_media.id}"]`);var e,a;i&&(window.setTimeout(()=>{$(i).trigger("click")},t),!this.isFullWidth||window.innerWidth<768||(e=(t=document.querySelector('.productView-image[data-index="1"]')).querySelector("img"),this.currentVariant&&null!=(a=this.currentVariant?.featured_image)&&(e.setAttribute("src",a.src),e.setAttribute("srcset",a.src),e.setAttribute("alt",a.alt),t.getBoundingClientRect().top<window.scrollY)&&this.scrollToBlock(t)))}}scrollToBlock(t){var e=document.querySelector('[id^="shopify-section-header"]').getBoundingClientRect().height,a=document.getElementById("shopify-section-announcement-bar").getBoundingClientRect().height,t=t.getBoundingClientRect().top-e-a;window.scrollTo({top:t,behavior:"smooth"})}updateURL(){this.currentVariant&&window.history.replaceState({},"",this.dataset.url+"?variant="+this.currentVariant.id)}updateVariantInput(){document.querySelectorAll(`#product-form-${this.dataset.product}, #product-form-installment-`+this.dataset.product).forEach(t=>{t=t.querySelector('input[name="id"]');t.value=this.currentVariant.id,t.dispatchEvent(new Event("change",{bubbles:!0}))})}updatePickupAvailability(){var t=document.querySelector("pickup-availability");t&&(this.currentVariant?.available?t.fetchAvailability(this.currentVariant.id):(t.removeAttribute("available"),t.innerHTML=""))}renderProductAjaxInfo(){fetch(`${this.dataset.url}?variant=${this.currentVariant.id}&section_id=`+this.dataset.section).then(t=>t.text()).then(t=>{var e="product-price-"+this.dataset.product,t=(new DOMParser).parseFromString(t,"text/html"),a=document.getElementById(e),e=t.getElementById(e),i="product-property-"+this.dataset.product,n=document.getElementById(i),t=t.getElementById(i);e&&a&&(a.innerHTML=e.innerHTML),this.checkNeedToConvertCurrency()&&(i=document.getElementById("currencies")?.querySelector(".active")?.getAttribute("data-currency"),Currency.convertAll(window.shop_currency,i,"span.money","money_format")),n?t?(n.innerHTML=t.innerHTML,n.style.display="table"):n.style.display="none":t&&document.querySelector(".productView-product").insertBefore(t,document.querySelector(".productView-options")),document.getElementById("product-price-"+this.dataset.product)?.classList.remove("visibility-hidden")})}renderProductInfo(){var h=this.getVariantData().filter(t=>t.available),m=this.currentVariant?.option1,v=this.currentVariant?.option2,y=this.currentVariant?.option3,f=this.item.find(".product-form__input"),t=f.length,_=this.item.find(".productView-details .product-form__input").length,b=_<t?!0:!1;$.each(f,(t,e)=>{var a=$(e).data("option-index"),i=$(e).data("product-attribute");switch(a){case 0:$(e).find("[data-header-option]").text(m),"set-select"==i?$(e).find(".select__select option").each((t,e)=>{e.value==m?$(e).attr("selected","selected"):$(e).removeAttr("selected")}):($(e).find(".product-form__radio").prop("checked",!1),$(e).find(`.product-form__radio[value="${this.encodeOption(m)}"]`).prop("checked",!0));var n=h.filter(t=>t.option1===m);v&&(d=(o=$(f[1])).find(".product-form__radio"),s=o.find(".select__select option"),b&&(c=(l=$(f[1+_])).find(".product-form__radio"),u=l.find(".select__select option")),"set-rectangle"==i?d.each((t,e)=>{var a=$(e).next(),i=this.decodeOption($(e).val());null==n.find(t=>t.option2==i)?(a.removeClass("available").addClass("soldout"),b&&$(c[t]).next().removeClass("available").addClass("soldout")):(a.removeClass("soldout").addClass("available"),b&&$(c[t]).next().removeClass("soldout").addClass("available"))}):s.each((t,e)=>{var a=$(e),i=this.decodeOption($(e).val());null==n.find(t=>t.option2==i)?(a.attr("disabled",!0),b&&$(u[t]).attr("disabled",!0)):(a.removeAttr("disabled"),b&&$(u[t]).removeAttr("disabled"))})),y&&(d=(o=$(f[2])).find(".product-form__radio"),s=o.find(".select__select option"),b&&(c=(l=$(f[2+_])).find(".product-form__radio"),u=l.find(".select__select option")),"set-rectangle"==i?d.each((t,e)=>{var a=$(e).next(),i=this.decodeOption($(e).val());null==n.find(t=>t.option3==i)?(a.removeClass("available").addClass("soldout"),b&&$(c[t]).next().removeClass("available").addClass("soldout")):(a.removeClass("soldout").addClass("available"),b&&$(c[t]).next().removeClass("soldout").addClass("available"))}):s.each((t,e)=>{var a=$(e),i=this.decodeOption($(e).val());null==n.find(t=>t.option3==i)?(a.attr("disabled",!0),b&&$(u[t]).attr("disabled",!0)):(a.removeAttr("disabled"),b&&$(u[t]).removeAttr("disabled"))}));break;case 1:$(e).find("[data-header-option]").text(v),"set-select"==i?$(e).find(".select__select option").each((t,e)=>{e.value==v?$(e).attr("selected","selected"):$(e).removeAttr("selected")}):($(e).find(".product-form__radio").prop("checked",!1),$(e).find(`.product-form__radio[value="${this.encodeOption(v)}"]`).prop("checked",!0));var r=h.filter(t=>t.option2===v);m&&(d=(o=$(f[0])).find(".product-form__radio"),s=o.find(".select__select option"),b&&(c=(l=$(f[_])).find(".product-form__radio"),u=l.find(".select__select option")),"set-rectangle"==i?d.each((t,e)=>{var a=$(e).next(),i=this.decodeOption($(e).val());null==r.find(t=>t.option1==i)?(a.removeClass("available").addClass("soldout"),b&&$(c[t]).next().removeClass("available").addClass("soldout")):(a.removeClass("soldout").addClass("available"),b&&$(c[t]).next().removeClass("soldout").addClass("available"))}):s.each((t,e)=>{var a=$(e),i=this.decodeOption($(e).val());null==r.find(t=>t.option1==i)?(a.attr("disabled",!0),b&&$(c[t]).attr("disabled",!0)):(a.removeAttr("disabled"),b&&$(c[t]).removeAttr("disabled"))})),y&&(d=(o=$(f[2])).find(".product-form__radio"),s=o.find(".select__select option"),b&&(c=(l=$(f[2+_])).find(".product-form__radio"),u=l.find(".select__select option")),"set-rectangle"==i?d.each((t,e)=>{var a=$(e).next(),i=this.decodeOption($(e).val());null==r.find(t=>t.option3==i)?(a.removeClass("available").addClass("soldout"),b&&$(c[t]).next().removeClass("available").addClass("soldout")):(a.removeClass("soldout").addClass("available"),b&&$(c[t]).next().removeClass("soldout").addClass("available"))}):s.each((t,e)=>{var a=$(e),i=this.decodeOption($(e).val());null==r.find(t=>t.option3==i)?(a.attr("disabled",!0),b&&$(c[t]).attr("disabled",!0)):(a.removeAttr("disabled"),b&&$(c[t]).removeAttr("disabled"))}));break;case 2:$(e).find("[data-header-option]").text(y),"set-select"==i?$(e).find(".select__select option").each((t,e)=>{e.value==y?$(e).attr("selected","selected"):$(e).removeAttr("selected")}):($(e).find(".product-form__radio").prop("checked",!1),$(e).find(`.product-form__radio[value="${this.encodeOption(y)}"]`).prop("checked",!0));var o,d,s,l,c,u,p=h.filter(t=>t.option3===y);m&&(d=(o=$(f[0])).find(".product-form__radio"),s=o.find(".select__select option"),b&&(c=(l=$(f[_])).find(".product-form__radio"),u=l.find(".select__select option")),"set-rectangle"==i?d.each((t,e)=>{var a=$(e).next(),i=this.decodeOption($(e).val());null==p.find(t=>t.option1==i)?(a.removeClass("available").addClass("soldout"),b&&$(c[t]).next().removeClass("available").addClass("soldout")):(a.removeClass("soldout").addClass("available"),b&&$(c[t]).next().removeClass("soldout").addClass("available"))}):s.each((t,e)=>{var a=$(e),i=this.decodeOption($(e).val());null==p.find(t=>t.option1==i)?(a.attr("disabled",!0),b&&$(c[t]).attr("disabled",!0)):(a.removeAttr("disabled"),b&&$(c[t]).removeAttr("disabled"))})),v&&(d=(o=$(f[1])).find(".product-form__radio"),s=o.find(".select__select option"),b&&(c=(l=$(f[1+_])).find(".product-form__radio"),u=l.find(".select__select option")),"set-rectangle"==i?d.each((t,e)=>{var a=$(e).next(),i=this.decodeOption($(e).val());null==p.find(t=>t.option2==i)?(a.removeClass("available").addClass("soldout"),b&&$(c[t]).next().removeClass("available").addClass("soldout")):(a.removeClass("soldout").addClass("available"),b&&$(c[t]).next().removeClass("soldout").addClass("available"))}):s.each((t,e)=>{var a=$(e),i=this.decodeOption($(e).val());null==p.find(t=>t.option2==i)?(a.attr("disabled",!0),b&&$(c[t]).attr("disabled",!0)):(a.removeAttr("disabled"),b&&$(c[t]).removeAttr("disabled"))}))}}),0<this.item.find("[data-sku]").length&&this.item.find("[data-sku] .productView-info-value").text(this.currentVariant.sku),null!=this.currentVariant?.inventory_management&&(t="product_inven_array_"+this.dataset.product,null!=(t=window[t]))&&(t=t[this.currentVariant.id],t=parseInt(t),this.item.find('input[name="quantity"]').attr("data-inventory-quantity",t),0<this.item.find("[data-inventory]").length&&(0<t?"show"==this.item.find("[data-inventory]").data("stock-level")?this.item.find("[data-inventory] .productView-info-value").text(t+" "+window.inventory_text.inStock):this.item.find("[data-inventory] .productView-info-value").text(window.inventory_text.inStock):this.item.find("[data-inventory] .productView-info-value").text(window.inventory_text.outOfStock)),hotStock(t)),0<this.item.find(".productView-stickyCart").length&&this.item.find(".productView-stickyCart").find(".select__select").val(this.currentVariant.id)}updateProductInfo(){fetch(`${this.dataset.url}?variant=${this.currentVariant.id}&section_id=`+this.dataset.section).then(t=>t.text()).then(t=>{var e=`[data-product-description-${this.dataset.product}]`,t=(new DOMParser).parseFromString(t,"text/html"),a=document.querySelector(e),t=t.querySelector(e);t&&a&&(a.innerHTML=t.innerHTML,a.closest(".toggle-content--height"))&&(a.style.maxHeight=null)})}updateAttribute(t=!0,e=!0){var a,i,n,r=document.getElementById("product-form-"+this.dataset.product)?.querySelector('[name="add"]'),o=this.item.find('input[name="quantity"]'),d=this.item.find(".productView-notifyMe"),s=this.item.find(".productView-hotStock"),l=parseInt(o.attr("data-inventory-quantity"));t?(a=window.variantStrings.unavailable,o.attr("disabled",!0),d.slideUp("slow"),r.setAttribute("disabled",!0),r.textContent=a,o.closest("quantity-input").addClass("disabled"),0<s.length&&s.addClass("is-hiden")):e?(a=window.variantStrings.soldOut,o.attr("data-price",this.currentVariant?.price),o.attr("disabled",!0),r.setAttribute("disabled",!0),r.textContent=a,o.closest("quantity-input").addClass("disabled"),0<d.length&&(d.find('input[name="halo-notify-product-variant"]').val(this.currentVariant.title),d.find(".notifyMe-text").empty(),d.slideDown("slow"))):(t=0,s=this.currentVariant?.price,e=$("[data-sticky-add-to-cart] .sticky-price .money"),window.subtotal.show?(t=o.val()*s,t=Shopify.formatMoney(t,window.money_format),t=extractContent(t),(i=document.createElement("span")).classList.add(window.currencyFormatted?"money":"money-subtotal"),i.innerText=t,document.body.appendChild(i),this.checkNeedToConvertCurrency()&&(n=document.getElementById("currencies")?.querySelector(".active")?.getAttribute("data-currency"),Currency.convertAll(window.shop_currency,n,"span.money","money_format")),t=i.innerText,$(i).remove(),"1"==window.subtotal.style?(null!=(n=document.querySelector(".productView-subtotal .money")||document.querySelector(".productView-subtotal .money-subtotal"))&&(n.textContent=t),a=this.currentVariant.available&&l<=0?window.variantStrings.preOrder:window.variantStrings.addToCart):"2"==window.subtotal.style&&(a=window.subtotal.text.replace("[value]",t))):(t=Shopify.formatMoney(s,window.money_format),t=extractContent(t),a=this.currentVariant.available&&l<=0?window.variantStrings.preOrder:window.variantStrings.addToCart),o.attr("data-price",this.currentVariant?.price),o.attr("disabled",!1),r.removeAttribute("disabled"),r.textContent=a,o.closest("quantity-input").removeClass("disabled"),0!=t&&e.length&&e.text(t),0<d.length&&d.slideUp("slow"))}updateStickyAddToCart(t=!0,e=!0){var a,i,n,r,o,d;0<this.item.find(".productView-stickyCart").length&&(a=(i=this.item.find(".productView-stickyCart")).find(".sticky-image"),i=i.find(".select__select"),n=document.getElementById("product-form-sticky-"+this.dataset.product)?.querySelector('input[name="id"]'),r=document.getElementById("product-form-sticky-"+this.dataset.product)?.querySelector('[name="add"]'),o=this.item.find('input[name="quantity"]'),o=parseInt(o.attr("data-inventory-quantity")),t?(d=window.variantStrings.unavailable,r.setAttribute("disabled",!0),r.textContent=d):this.currentVariant&&(null!=(t=this.currentVariant?.featured_image)&&a.find("img").attr({src:t.src,srcset:t.src,alt:t.alt}),i.val(this.currentVariant.id),e?(d=window.variantStrings.soldOut,r.setAttribute("disabled",!0)):(d=this.currentVariant.available&&o<=0?window.variantStrings.preOrder:window.variantStrings.addToCart,r.removeAttribute("disabled")),r.textContent=d,n.value=this.currentVariant.id,n.dispatchEvent(new Event("change",{bubbles:!0}))))}getVariantData(){return this.variantData=this.variantData||JSON.parse(this.querySelector('[type="application/json"]').textContent),this.variantData}checkNeedToConvertCurrency(){return window.show_multiple_currencies&&Currency.currentCurrency!=shopCurrency||window.show_auto_currency}checkQuantityWhenVariantChange(){var t=this.closest(".productView-details").querySelector("input.quantity__input"),e=parseInt(t?.dataset.inventoryQuantity),a=parseInt(t?.value);let i=a;((i=e<a&&0<e?e:a)<1||isNaN(i))&&(i=1),t&&(t.value=i),document.getElementById("product-add-to-cart").dataset.available=this.currentVariant.available&&e<=0}}customElements.define("variant-selects",VariantSelects);class VariantRadios extends VariantSelects{constructor(){super()}updateOptions(){var t=Array.from(this.querySelectorAll("fieldset"));this.options=t.map(t=>Array.from(t.querySelectorAll("input")).find(t=>t.checked).value)}}customElements.define("variant-radios",VariantRadios);class QuantityInput extends HTMLElement{constructor(){super(),this.input=this.querySelector("input"),this.changeEvent=new Event("change",{bubbles:!0}),this.input.addEventListener("change",this.onInputChange.bind(this)),this.querySelectorAll("button").forEach(t=>t.addEventListener("click",this.onButtonClick.bind(this))),this.checkHasMultipleVariants()||(this.initProductQuantity(),this.checkVariantInventory())}onInputChange(t){t.preventDefault();var e,t=this.input.value,a=parseInt(this.input.dataset.inventoryQuantity),i=document.getElementById("product-form-"+this.input.dataset.product)?.querySelector('[name="id"]')?.value,n="true"===document.getElementById("product-add-to-cart").dataset.available||!1,r=document.getElementById("product-form-"+this.input.dataset.product)?.querySelector('[name="add"]');t<1&&(this.input.value=t=1),a<t&&!n&&0<a?(e="selling_array_"+this.input.dataset.product,"deny"==window[e][i]&&showWarning(getInputMessage(this.input.value=t=a),3e3)):a<t&&n&&a<=0&&(this.input.value=t),window.subtotal.show&&(e=this.input.dataset.price,i=0,new DOMParser,i=t*e,i=Shopify.formatMoney(i,window.money_format),i=extractContent(i),(n=document.createElement("span")).classList.add(window.currencyFormatted?"money":"money-subtotal"),n.innerText=i,document.body.appendChild(n),this.checkNeedToConvertCurrency()&&(a=document.getElementById("currencies")?.querySelector(".active")?.getAttribute("data-currency"),Currency.convertAll(window.shop_currency,a,"span.money","money_format")),i=n.innerText,$(n).remove(),"1"==window.subtotal.style?(document.querySelector(".productView-subtotal .money")||document.querySelector(".productView-subtotal .money-subtotal")).textContent=i:"2"==window.subtotal.style&&(e=window.subtotal.text.replace("[value]",i),r.textContent=e),(a=$("[data-sticky-add-to-cart] .sticky-price .money")).length)&&a.text(i),(this.classList.contains("quantity__group--2")||this.classList.contains("quantity__group--3"))&&(document.querySelector(".quantity__group--1 .quantity__input").value=t,n=!!document.querySelector(".quantity__group--2 .quantity__input"),r=!!document.querySelector(".quantity__group--3 .quantity__input"),this.classList.contains("quantity__group--2")&&r?document.querySelector(".quantity__group--3 .quantity__input").value=t:this.classList.contains("quantity__group--3")&&n&&(document.querySelector(".quantity__group--2 .quantity__input").value=t))}onButtonClick(t){t.preventDefault();var e=this.input.value;"plus"===t.target.name?this.input.stepUp():this.input.stepDown(),e!==this.input.value&&this.input.dispatchEvent(this.changeEvent)}checkNeedToConvertCurrency(){return window.show_multiple_currencies&&Currency.currentCurrency!=shopCurrency||window.show_auto_currency}checkHasMultipleVariants(){var t="product_inven_array_"+this.querySelector("[data-product]").dataset.product;return this.inven_array=window[t],1<Object.keys(this.inven_array).length}initProductQuantity(){var t;null!=this.inven_array&&(t=Object.values(this.inven_array),t=parseInt(t),this.querySelector('input[name="quantity"]').setAttribute("data-inventory-quantity",t),this.querySelector('input[name="quantity"]').dataset.inventoryQuantity=t)}checkVariantInventory(){var t=document.getElementById("product-add-to-cart");this.input.disabled=t.disabled,this.querySelector(".btn-quantity.minus").disabled=t.disabled,this.querySelector(".btn-quantity.plus").disabled=t.disabled}getVariantData(){return this.variantData=this.variantData||JSON.parse(document.querySelector('.product-option [type="application/json"]').textContent),this.variantData}}function hotStock(i){var n=document.querySelector(".productView").querySelector(".productView-hotStock");if(n){let t=n.querySelector(".hotStock-text"),e=parseFloat(n.dataset.hotStock),a;0<i&&i<=e?(a=(n.matches(".style-2")?window.inventory_text.hotStock2:window.inventory_text.hotStock).replace("[inventory]",i),t.innerHTML=a,n.classList.remove("is-hide")):n.classList.add("is-hide"),n.matches(".style-2")&&(i=i/e*100,n.querySelector(".hotStock-progress-item").style.width=i+"%")}}customElements.define("quantity-input",QuantityInput);const hotStockNoOptions=document.querySelector(".productView .productView-hotStock[data-current-inventory]");if(hotStockNoOptions){const m1=parseFloat(hotStockNoOptions.dataset.currentInventory);hotStock(m1)}function showWarning(t,e=null){window.warningTimeout&&clearTimeout(window.warningTimeout),document.getElementById("halo-warning-popup").querySelector("[data-halo-warning-content]").textContent=t,document.body.classList.add("has-warning"),e&&(window.warningTimeout=setTimeout(()=>{document.body.classList.remove("has-warning")},e))}function getInputMessage(t){return window.cartStrings.addProductOutQuantity.replace("[maxQuantity]",t)}