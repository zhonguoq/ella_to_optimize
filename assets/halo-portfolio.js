class Portfolio extends HTMLElement{constructor(){var t;if(super(),this.Shuffle=window.Shuffle,this.element=this.querySelector(".shuffle-container"),this.sizer=this.querySelector(".sizer-element"),this.tabs=document.getElementById("haloPortfolioTabs"),this.tabContents=document.getElementById("haloPortfolioTabContents"),this.masonryItems=[...document.querySelectorAll(".masonry-item")],this.imageBoxElements=this.querySelectorAll(".img-box"),this.showMorebtn=this.querySelector("#portfolio-showmore-btn"),this.limit=parseInt(this.tabContents.dataset.limit),this.itemNumberToShow=this.limit,this.infiniteEnabled="true"===this.tabContents.dataset.infinite,this.shuffleInstance=new this.Shuffle(this.element,{itemSelector:".masonry-item",sizer:this.sizer,percentPosition:!0}),this.tabs&&(t=this.tabs.dataset.galleryNames.split(","),new Set(t).forEach(t=>{var t=t.slice(0,-1),e=document.createElement("li"),s=(e.classList.add("tab"),e.dataset.gallery=t.toLowerCase(),document.createElement("a"));s.classList.add("tab-title"),s.innerText=t,s.href="#",s.role="button",s.title=t,e.appendChild(s),this.tabs.appendChild(e)}),this.tabs.querySelector("a"))&&this.tabs.querySelectorAll("a").forEach(t=>{t.addEventListener("click",this.onClickTabButtonHandler.bind(this))}),this.imageBoxElements&&this.imageBoxElements.forEach(t=>{t.addEventListener("click",this.handleThumbnailClick)}),this.infiniteEnabled&&this.masonryItems.forEach((t,e)=>{e<this.limit?t.classList.add("d-block"):t.classList.add("d-none")}),this.showMorebtn){if(this.masonryItems?.length-1<=this.limit)return this.showMorebtn.classList.add("disabled");this.showMorebtn.addEventListener("click",this.handleShowMoreClick.bind(this))}checkButtonSpacingTopPortfolio2(this.masonryItems,this.showMorebtn)}onClickTabButtonHandler(t){t.preventDefault(),t.stopPropagation();t.currentTarget;var t=t.target.closest("li"),e=t.getAttribute("data-gallery");t.classList.contains("is-active")||(this.tabs.querySelectorAll("li").forEach(t=>{t.classList.remove("is-active")}),t.classList.add("is-active"),this.filterSelection(e))}filterSelection(s){$("[data-gallery-tab-content] .masonry-item");"all"==s?(this.shuffleInstance.filter(),this.infiniteEnabled&&(showElement(this.showMorebtn),this.itemNumberToShow=this.masonryItems.filter(t=>t.classList.contains("d-block")).length-1,this.itemNumberToShow+=this.limit,checkAvailableItemsToShow(this.masonryItems,this.itemNumberToShow,this.showMorebtn))):(this.infiniteEnabled&&(this.tabContents.querySelectorAll(`[data-gallery-item="${s}"]`).forEach(t=>{t.classList.remove("d-none"),t.classList.add("d-block")}),hideElement(this.showMorebtn)),this.shuffleInstance.filter(t=>{var e=t.getAttribute("data-gallery-item");if(null!=e)return-1!=$(t).data("gallery-item").indexOf(s)}))}handleThumbnailClick(t){t.preventDefault(),t.stopPropagation();t=t.target.closest(".img-box");if("to_link"===t.dataset.action)return e=t.dataset.link,window.location.href=e;var e=t.dataset.href;if(e){const s=e.split(",");t=s.map((t,e)=>({src:t,opts:{caption:e+1+" of "+s.length}}));$.fancybox.open(t,{loop:!0,thumbs:{autoStart:!1},slideClass:"portfolio",buttons:[],clickSlide:"close",mobile:{clickSlide:function(t,e){return"close"}},afterLoad:function(t,e){t.$caption.appendTo(".fancybox-image-wrap").text(t.$caption.text()),$(".fancybox-image-wrap").append('<div class="close-box"></div>'),$(".close-box").on("click touchend",function(){t.close()})}})}}handleShowMoreClick(){this.itemNumberToShow+=this.limit,this.showMorebtn.classList.add("is-loading"),setTimeout(()=>{setMasonryItems(this.masonryItems,this.itemNumberToShow),this.shuffleInstance=new this.Shuffle(this.element,{itemSelector:".masonry-item",sizer:this.sizer,percentPosition:!0,columnWidth:".sizer-element"}),checkAvailableItemsToShow(this.masonryItems,this.itemNumberToShow,this.showMorebtn),checkButtonSpacingTopPortfolio2(this.masonryItems,this.showMorebtn),this.showMorebtn.classList.remove("is-loading")},700)}}function hideElement(t){t.style.display="none"}function showElement(t){t.style.display="inline-block"}function checkAvailableItemsToShow(t,e,s){var i=t.filter(t=>t.classList.contains("d-block")&&!t.classList.contains("sizer-element")).length;if(i==t.length-1&&i<=e)return s.classList.add("disabled");s.classList.remove("disabled")}function checkButtonSpacingTopPortfolio2(t,e){if(t.filter(t=>t.classList.contains("d-block")&&!t.classList.contains("sizer-element")).length%2==0)return e.classList.remove("extra-spaced");e.classList.add("extra-spaced")}function setMasonryItems(s,i){s.forEach((t,e)=>{i<=e?t.classList.add("d-none"):t.classList.add("d-block"),e+1===s.length&&(t.classList.remove("d-none"),t.classList.add("d-block"))})}customElements.define("portfolio-item",Portfolio);